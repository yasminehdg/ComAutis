{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>{{ topic.title }} - Forum ComAutis</title>
<link rel="stylesheet" href="{% static 'forum/style.css' %}">
</head>
<body>
<div class="container">
    <header>
        <h1>Forum ComAutis</h1>
    </header>
<section class="topic-header" style="display: flex; align-items: center; gap: 10px;">
    {% if topic.icon %}
        <img src="{% static 'forum/icons/' %}{{ topic.icon }}.png" class="icon" alt="Icône">
    {% endif %}
    <div>
        <h2>{{ topic.title }}</h2>
        <p class="creator">
            Créé par {{ topic.created_by.username }} le {{ topic.created_at|date:"d M Y H:i" }}
        </p>
    </div>
</section>


    {% if user.is_authenticated %}
    <section class="new-post">
        <h3>Ajouter un message</h3>
        <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Envoyer</button>
        </form>
    </section>
    {% else %}
    <p class="login-msg">Vous devez être connecté pour poster un message.</p>
    {% endif %}

    <section class="posts-list">
        <h3>Messages</h3>
        <div class="grid-container">
            {% for post in posts %}
            <div class="card post">
                <p>{{ post.content }}</p>
                <p class="author">Publié par {{ post.created_by.username }} le {{ post.created_at|date:"d M Y H:i" }}</p>
            </div>
            {% empty %}
            <p>Aucun message pour le moment.</p>
            {% endfor %}
        </div>
    </section>
</div>
</body>
</html>
